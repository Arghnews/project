<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>6.3. Events</title><link rel="stylesheet" type="text/css" href="config/vkspec-xhtml.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="home" href="index.html" title="Vulkan 1.0.30 - A Specification (with WSI extensions)" /><link rel="up" href="ch06.html" title="Chapter 6. Synchronization and Cache Control" /><link rel="prev" href="ch06s02.html" title="6.2. Semaphores" /><link rel="next" href="ch06s04.html" title="6.4. Execution And Memory Dependencies" /><script xmlns="" type="text/x-mathjax-config">
        MathJax.Hub.Config({
            MathML: { extensions: ["content-mathml.js"] },
            tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] }
        });
    </script><script xmlns="" type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><td width="20%" align="left"><a accesskey="p" href="ch06s02.html"><img src="images/icons/prev.png" alt="Prev" /></a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch06s04.html"><img src="images/icons/next.png" alt="Next" /></a></td></tr></table><hr /></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="synchronization-events"></a>6.3. Events</h2></div></div></div><p>Events represent a fine-grained synchronization primitive that <span class="normative">can</span> be used
to gauge progress through a sequence of commands executed on a queue by
Vulkan.
An event is initially in the unsignaled state.
It <span class="normative">can</span> be signaled by a device, using commands inserted into the command
buffer, or by the host.
It <span class="normative">can</span> also be reset to the unsignaled state by a device or the host.
The host <span class="normative">can</span> query the state of an event.
A device <span class="normative">can</span> wait for one or more events to become signaled.</p><p>Events are represented by <code class="code">VkEvent</code> handles:</p><p><a id="VkEvent"></a><strong> </strong>
</p><pre class="programlisting">VK_DEFINE_NON_DISPATCHABLE_HANDLE(VkEvent)</pre><p>
</p><p>To create an event, call:</p><p><a id="vkCreateEvent"></a><strong> </strong>
</p><pre class="programlisting">VkResult vkCreateEvent(
    VkDevice                                    device,
    const VkEventCreateInfo*                    pCreateInfo,
    const VkAllocationCallbacks*                pAllocator,
    VkEvent*                                    pEvent);</pre><p>
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>device</code></em> is the logical device that creates the event.
</li><li class="listitem">
<em class="parameter"><code>pCreateInfo</code></em> is a pointer to an instance of the
    <code class="code">VkEventCreateInfo</code> structure which contains information about how
    the event is to be created.
</li><li class="listitem">
<em class="parameter"><code>pAllocator</code></em> controls host memory allocation as described in the
    <a class="link" href="ch10s01.html#memory-allocation">Memory Allocation</a> chapter.
</li><li class="listitem">
<em class="parameter"><code>pEvent</code></em> points to a handle in which the resulting event object is
    returned.
</li></ul></div><p>When created, the event object is in the unsignaled state.</p><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Valid Usage (Implicit)</strong></p></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>device</code></em> <span class="normative">must</span> be a valid <code class="code">VkDevice</code> handle
</li><li class="listitem">
<em class="parameter"><code>pCreateInfo</code></em> <span class="normative">must</span> be a pointer to a valid <code class="code">VkEventCreateInfo</code> structure
</li><li class="listitem">
If <em class="parameter"><code>pAllocator</code></em> is not <code class="literal">NULL</code>, <em class="parameter"><code>pAllocator</code></em> <span class="normative">must</span> be a pointer to a valid <code class="code">VkAllocationCallbacks</code> structure
</li><li class="listitem">
<em class="parameter"><code>pEvent</code></em> <span class="normative">must</span> be a pointer to a <code class="code">VkEvent</code> handle
</li></ul></div></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Return Codes</strong></p></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<a class="link" href="ch02s06.html#fundamentals-successcodes" title="Success Codes">Success</a>
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="code">VK_SUCCESS</code>
</li></ul></div></dd><dt><span class="term">
<a class="link" href="ch02s06.html#fundamentals-errorcodes" title="Error codes">Failure</a>
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="code">VK_ERROR_OUT_OF_HOST_MEMORY</code>
</li><li class="listitem">
<code class="code">VK_ERROR_OUT_OF_DEVICE_MEMORY</code>
</li></ul></div></dd></dl></div></div><p>The <code class="code">VkEventCreateInfo</code> structure is defined as:</p><p><a id="VkEventCreateInfo"></a><strong> </strong>
</p><pre class="programlisting">typedef struct VkEventCreateInfo {
    VkStructureType       sType;
    const void*           pNext;
    VkEventCreateFlags    flags;
} VkEventCreateInfo;</pre><p>
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>flags</code></em> is reserved for future use.
</li></ul></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Valid Usage (Implicit)</strong></p></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>sType</code></em> <span class="normative">must</span> be <code class="code">VK_STRUCTURE_TYPE_EVENT_CREATE_INFO</code>
</li><li class="listitem">
<em class="parameter"><code>pNext</code></em> <span class="normative">must</span> be <code class="literal">NULL</code>
</li><li class="listitem">
<em class="parameter"><code>flags</code></em> <span class="normative">must</span> be <code class="literal">0</code>
</li></ul></div></div><p>To destroy an event, call:</p><p><a id="vkDestroyEvent"></a><strong> </strong>
</p><pre class="programlisting">void vkDestroyEvent(
    VkDevice                                    device,
    VkEvent                                     event,
    const VkAllocationCallbacks*                pAllocator);</pre><p>
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>device</code></em> is the logical device that destroys the event.
</li><li class="listitem">
<em class="parameter"><code>event</code></em> is the handle of the event to destroy.
</li><li class="listitem">
<em class="parameter"><code>pAllocator</code></em> controls host memory allocation as described in the
    <a class="link" href="ch10s01.html#memory-allocation">Memory Allocation</a> chapter.
</li></ul></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Valid Usage</strong></p></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
All submitted commands that refer to <em class="parameter"><code>event</code></em> <span class="normative">must</span> have completed
    execution
</li><li class="listitem">
If <code class="code">VkAllocationCallbacks</code> were provided when <em class="parameter"><code>event</code></em> was
    created, a compatible set of callbacks <span class="normative">must</span> be provided here
</li><li class="listitem">
If no <code class="code">VkAllocationCallbacks</code> were provided when <em class="parameter"><code>event</code></em> was
    created, <em class="parameter"><code>pAllocator</code></em> <span class="normative">must</span> be <code class="literal">NULL</code>
</li></ul></div></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Valid Usage (Implicit)</strong></p></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>device</code></em> <span class="normative">must</span> be a valid <code class="code">VkDevice</code> handle
</li><li class="listitem">
If <em class="parameter"><code>event</code></em> is not <code class="code"><a class="link" href="apds03.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a></code>, <em class="parameter"><code>event</code></em> <span class="normative">must</span> be a valid <code class="code">VkEvent</code> handle
</li><li class="listitem">
If <em class="parameter"><code>pAllocator</code></em> is not <code class="literal">NULL</code>, <em class="parameter"><code>pAllocator</code></em> <span class="normative">must</span> be a pointer to a valid <code class="code">VkAllocationCallbacks</code> structure
</li><li class="listitem">
If <em class="parameter"><code>event</code></em> is a valid handle, it <span class="normative">must</span> have been created, allocated, or retrieved from <em class="parameter"><code>device</code></em>
</li></ul></div></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Host Synchronization</strong></p></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Host access to <em class="parameter"><code>event</code></em> <span class="normative">must</span> be externally synchronized
</li></ul></div></div><p>To query the state of an event from the host, call:</p><p><a id="vkGetEventStatus"></a><strong> </strong>
</p><pre class="programlisting">VkResult vkGetEventStatus(
    VkDevice                                    device,
    VkEvent                                     event);</pre><p>
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>device</code></em> is the logical device that owns the event.
</li><li class="listitem">
<em class="parameter"><code>event</code></em> is the handle of the event to query.
</li></ul></div><p>Upon success, <span class="strong"><strong><code class="code">vkGetEventStatus</code></strong></span> returns the state of the event object
with the following return codes:</p><div class="table"><a id="id-1.8.8.25"></a><p class="title"><strong>Table 6.1. Event Object Status Codes</strong></p><div class="table-contents"><table class="table" summary="Event Object Status Codes" cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; " width="80%"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"> Status </th><th style="border-bottom: 1px solid #527bbd; " align="left" valign="top"> Meaning</th></tr></thead><tbody><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_EVENT_SET</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>The event specified by <em class="parameter"><code>event</code></em> is signaled.</p></td></tr><tr><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_EVENT_RESET</code></p></td><td style="" align="left" valign="top"><p>The event specified by <em class="parameter"><code>event</code></em> is unsignaled.</p></td></tr></tbody></table></div></div><br class="table-break" /><p>If a <span class="strong"><strong><code class="code">vkCmdSetEvent</code></strong></span> or <span class="strong"><strong><code class="code">vkCmdResetEvent</code></strong></span> command is pending
execution, then the value returned by this command <span class="normative">may</span> immediately be out
of date.</p><p>The state of an event <span class="normative">can</span> be updated by the host.
The state of the event is immediately changed, and subsequent calls to
<span class="strong"><strong><code class="code">vkGetEventStatus</code></strong></span> will return the new state.
If an event is already in the requested state, then updating it to the same
state has no effect.</p><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Valid Usage (Implicit)</strong></p></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>device</code></em> <span class="normative">must</span> be a valid <code class="code">VkDevice</code> handle
</li><li class="listitem">
<em class="parameter"><code>event</code></em> <span class="normative">must</span> be a valid <code class="code">VkEvent</code> handle
</li><li class="listitem">
<em class="parameter"><code>event</code></em> <span class="normative">must</span> have been created, allocated, or retrieved from <em class="parameter"><code>device</code></em>
</li></ul></div></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Return Codes</strong></p></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<a class="link" href="ch02s06.html#fundamentals-successcodes" title="Success Codes">Success</a>
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="code">VK_EVENT_SET</code>
</li><li class="listitem">
<code class="code">VK_EVENT_RESET</code>
</li></ul></div></dd><dt><span class="term">
<a class="link" href="ch02s06.html#fundamentals-errorcodes" title="Error codes">Failure</a>
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="code">VK_ERROR_OUT_OF_HOST_MEMORY</code>
</li><li class="listitem">
<code class="code">VK_ERROR_OUT_OF_DEVICE_MEMORY</code>
</li><li class="listitem">
<code class="code">VK_ERROR_DEVICE_LOST</code>
</li></ul></div></dd></dl></div></div><p>To set the state of an event to signaled from the host, call:</p><p><a id="vkSetEvent"></a><strong> </strong>
</p><pre class="programlisting">VkResult vkSetEvent(
    VkDevice                                    device,
    VkEvent                                     event);</pre><p>
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>device</code></em> is the logical device that owns the event.
</li><li class="listitem">
<em class="parameter"><code>event</code></em> is the event to set.
</li></ul></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Valid Usage (Implicit)</strong></p></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>device</code></em> <span class="normative">must</span> be a valid <code class="code">VkDevice</code> handle
</li><li class="listitem">
<em class="parameter"><code>event</code></em> <span class="normative">must</span> be a valid <code class="code">VkEvent</code> handle
</li><li class="listitem">
<em class="parameter"><code>event</code></em> <span class="normative">must</span> have been created, allocated, or retrieved from <em class="parameter"><code>device</code></em>
</li></ul></div></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Host Synchronization</strong></p></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Host access to <em class="parameter"><code>event</code></em> <span class="normative">must</span> be externally synchronized
</li></ul></div></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Return Codes</strong></p></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<a class="link" href="ch02s06.html#fundamentals-successcodes" title="Success Codes">Success</a>
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="code">VK_SUCCESS</code>
</li></ul></div></dd><dt><span class="term">
<a class="link" href="ch02s06.html#fundamentals-errorcodes" title="Error codes">Failure</a>
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="code">VK_ERROR_OUT_OF_HOST_MEMORY</code>
</li><li class="listitem">
<code class="code">VK_ERROR_OUT_OF_DEVICE_MEMORY</code>
</li></ul></div></dd></dl></div></div><p>To set the state of an event to unsignaled from the host, call:</p><p><a id="vkResetEvent"></a><strong> </strong>
</p><pre class="programlisting">VkResult vkResetEvent(
    VkDevice                                    device,
    VkEvent                                     event);</pre><p>
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>device</code></em> is the logical device that owns the event.
</li><li class="listitem">
<em class="parameter"><code>event</code></em> is the event to reset.
</li></ul></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Valid Usage</strong></p></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>event</code></em> <span class="normative">must</span> not be waited on by a <span class="strong"><strong><code class="code">vkCmdWaitEvents</code></strong></span> command
    that is currently executing
</li></ul></div></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Valid Usage (Implicit)</strong></p></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>device</code></em> <span class="normative">must</span> be a valid <code class="code">VkDevice</code> handle
</li><li class="listitem">
<em class="parameter"><code>event</code></em> <span class="normative">must</span> be a valid <code class="code">VkEvent</code> handle
</li><li class="listitem">
<em class="parameter"><code>event</code></em> <span class="normative">must</span> have been created, allocated, or retrieved from <em class="parameter"><code>device</code></em>
</li></ul></div></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Host Synchronization</strong></p></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Host access to <em class="parameter"><code>event</code></em> <span class="normative">must</span> be externally synchronized
</li></ul></div></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Return Codes</strong></p></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<a class="link" href="ch02s06.html#fundamentals-successcodes" title="Success Codes">Success</a>
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="code">VK_SUCCESS</code>
</li></ul></div></dd><dt><span class="term">
<a class="link" href="ch02s06.html#fundamentals-errorcodes" title="Error codes">Failure</a>
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="code">VK_ERROR_OUT_OF_HOST_MEMORY</code>
</li><li class="listitem">
<code class="code">VK_ERROR_OUT_OF_DEVICE_MEMORY</code>
</li></ul></div></dd></dl></div></div><p>The state of an event <span class="normative">can</span> also be updated on the device by commands
inserted in command buffers.
To set the state of an event to signaled from a device, call:</p><p><a id="vkCmdSetEvent"></a><strong> </strong>
</p><pre class="programlisting">void vkCmdSetEvent(
    VkCommandBuffer                             commandBuffer,
    VkEvent                                     event,
    VkPipelineStageFlags                        stageMask);</pre><p>
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>commandBuffer</code></em> is the command buffer into which the command is
    recorded.
</li><li class="listitem">
<em class="parameter"><code>event</code></em> is the event that will be signaled.
</li><li class="listitem">
<em class="parameter"><code>stageMask</code></em> specifies the pipeline stage at which the state of
    <em class="parameter"><code>event</code></em> is updated as described below.
</li></ul></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Valid Usage</strong></p></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
If the <a class="link" href="ch31s01.html#features-features-geometryShader">geometry shaders</a> feature is
    not enabled, <em class="parameter"><code>stageMask</code></em> <span class="normative">must</span> not contain
    <code class="code">VK_PIPELINE_STAGE_GEOMETRY_SHADER_BIT</code>
</li><li class="listitem">
If the <a class="link" href="ch31s01.html#features-features-tessellationShader">tessellation shaders</a>
    feature is not enabled, <em class="parameter"><code>stageMask</code></em> <span class="normative">must</span> not contain
    <code class="code">VK_PIPELINE_STAGE_TESSELLATION_CONTROL_SHADER_BIT</code> or
    <code class="code">VK_PIPELINE_STAGE_TESSELLATION_EVALUATION_SHADER_BIT</code>
</li></ul></div></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Valid Usage (Implicit)</strong></p></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>commandBuffer</code></em> <span class="normative">must</span> be a valid <code class="code">VkCommandBuffer</code> handle
</li><li class="listitem">
<em class="parameter"><code>event</code></em> <span class="normative">must</span> be a valid <code class="code">VkEvent</code> handle
</li><li class="listitem">
<em class="parameter"><code>stageMask</code></em> <span class="normative">must</span> be a valid combination of <code class="code"><a class="link" href="ch06s05.html#VkPipelineStageFlagBits">VkPipelineStageFlagBits</a></code> values
</li><li class="listitem">
<em class="parameter"><code>stageMask</code></em> <span class="normative">must</span> not be <code class="literal">0</code>
</li><li class="listitem">
<em class="parameter"><code>commandBuffer</code></em> <span class="normative">must</span> be in the recording state
</li><li class="listitem">
The <code class="code">VkCommandPool</code> that <em class="parameter"><code>commandBuffer</code></em> was allocated from <span class="normative">must</span> support graphics, or compute operations
</li><li class="listitem">
This command <span class="normative">must</span> only be called outside of a render pass instance
</li><li class="listitem">
Both of <em class="parameter"><code>commandBuffer</code></em>, and <em class="parameter"><code>event</code></em> <span class="normative">must</span> have been created, allocated, or retrieved from the same <code class="code">VkDevice</code>
</li></ul></div></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Host Synchronization</strong></p></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Host access to <em class="parameter"><code>commandBuffer</code></em> <span class="normative">must</span> be externally synchronized
</li></ul></div></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Command Properties</strong></p></div></div></div><div class="informaltable"><table class="informaltable" cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; " width="100%"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top">Command Buffer Levels</th><th style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top">Render Pass Scope</th><th style="border-bottom: 1px solid #527bbd; " align="left" valign="top">Supported Queue Types</th></tr></thead><tbody><tr><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>Primary
Secondary</p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>Outside</p></td><td style="" align="left" valign="top"><p>GRAPHICS
COMPUTE</p></td></tr></tbody></table></div></div><p>To set the state of an event to unsignaled from a device, call:</p><p><a id="vkCmdResetEvent"></a><strong> </strong>
</p><pre class="programlisting">void vkCmdResetEvent(
    VkCommandBuffer                             commandBuffer,
    VkEvent                                     event,
    VkPipelineStageFlags                        stageMask);</pre><p>
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>commandBuffer</code></em> is the command buffer into which the command is
    recorded.
</li><li class="listitem">
<em class="parameter"><code>event</code></em> is the event that will be reset.
</li><li class="listitem">
<em class="parameter"><code>stageMask</code></em> specifies the pipeline stage at which the state of
    <em class="parameter"><code>event</code></em> is updated as described below.
</li></ul></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Valid Usage</strong></p></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
If the <a class="link" href="ch31s01.html#features-features-geometryShader">geometry shaders</a> feature is
    not enabled, <em class="parameter"><code>stageMask</code></em> <span class="normative">must</span> not contain
    <code class="code">VK_PIPELINE_STAGE_GEOMETRY_SHADER_BIT</code>
</li><li class="listitem">
If the <a class="link" href="ch31s01.html#features-features-tessellationShader">tessellation shaders</a>
    feature is not enabled, <em class="parameter"><code>stageMask</code></em> <span class="normative">must</span> not contain
    <code class="code">VK_PIPELINE_STAGE_TESSELLATION_CONTROL_SHADER_BIT</code> or
    <code class="code">VK_PIPELINE_STAGE_TESSELLATION_EVALUATION_SHADER_BIT</code>
</li><li class="listitem">
When this command executes, <em class="parameter"><code>event</code></em> <span class="normative">must</span> not be waited on by a
    <span class="strong"><strong><code class="code">vkCmdWaitEvents</code></strong></span> command that is currently executing
</li></ul></div></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Valid Usage (Implicit)</strong></p></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>commandBuffer</code></em> <span class="normative">must</span> be a valid <code class="code">VkCommandBuffer</code> handle
</li><li class="listitem">
<em class="parameter"><code>event</code></em> <span class="normative">must</span> be a valid <code class="code">VkEvent</code> handle
</li><li class="listitem">
<em class="parameter"><code>stageMask</code></em> <span class="normative">must</span> be a valid combination of <code class="code"><a class="link" href="ch06s05.html#VkPipelineStageFlagBits">VkPipelineStageFlagBits</a></code> values
</li><li class="listitem">
<em class="parameter"><code>stageMask</code></em> <span class="normative">must</span> not be <code class="literal">0</code>
</li><li class="listitem">
<em class="parameter"><code>commandBuffer</code></em> <span class="normative">must</span> be in the recording state
</li><li class="listitem">
The <code class="code">VkCommandPool</code> that <em class="parameter"><code>commandBuffer</code></em> was allocated from <span class="normative">must</span> support graphics, or compute operations
</li><li class="listitem">
This command <span class="normative">must</span> only be called outside of a render pass instance
</li><li class="listitem">
Both of <em class="parameter"><code>commandBuffer</code></em>, and <em class="parameter"><code>event</code></em> <span class="normative">must</span> have been created, allocated, or retrieved from the same <code class="code">VkDevice</code>
</li></ul></div></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Host Synchronization</strong></p></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Host access to <em class="parameter"><code>commandBuffer</code></em> <span class="normative">must</span> be externally synchronized
</li></ul></div></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Command Properties</strong></p></div></div></div><div class="informaltable"><table class="informaltable" cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; " width="100%"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top">Command Buffer Levels</th><th style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top">Render Pass Scope</th><th style="border-bottom: 1px solid #527bbd; " align="left" valign="top">Supported Queue Types</th></tr></thead><tbody><tr><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>Primary
Secondary</p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>Outside</p></td><td style="" align="left" valign="top"><p>GRAPHICS
COMPUTE</p></td></tr></tbody></table></div></div><p>For both <span class="strong"><strong><code class="code">vkCmdSetEvent</code></strong></span> and <span class="strong"><strong><code class="code">vkCmdResetEvent</code></strong></span>, the status of
<em class="parameter"><code>event</code></em> is updated once the pipeline stages specified by <em class="parameter"><code>stageMask</code></em>
(see <a class="xref" href="ch06s05.html#synchronization-pipeline-stage-flags" title="6.5.2. Pipeline Stage Flags">Section 6.5.2, “Pipeline Stage Flags”</a>) have completed executing
prior commands.
The command modifying the event is passed through the pipeline bound to the
command buffer at time of execution.</p><p>To wait for one or more events to enter the signaled state on a device,
call:</p><p><a id="vkCmdWaitEvents"></a><strong> </strong>
</p><pre class="programlisting">void vkCmdWaitEvents(
    VkCommandBuffer                             commandBuffer,
    uint32_t                                    eventCount,
    const VkEvent*                              pEvents,
    VkPipelineStageFlags                        srcStageMask,
    VkPipelineStageFlags                        dstStageMask,
    uint32_t                                    memoryBarrierCount,
    const VkMemoryBarrier*                      pMemoryBarriers,
    uint32_t                                    bufferMemoryBarrierCount,
    const VkBufferMemoryBarrier*                pBufferMemoryBarriers,
    uint32_t                                    imageMemoryBarrierCount,
    const VkImageMemoryBarrier*                 pImageMemoryBarriers);</pre><p>
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>commandBuffer</code></em> is the command buffer into which the command is
    recorded.
</li><li class="listitem">
<em class="parameter"><code>eventCount</code></em> is the length of the <em class="parameter"><code>pEvents</code></em> array.
</li><li class="listitem">
<em class="parameter"><code>pEvents</code></em> is an array of event object handles to wait on.
</li><li class="listitem">
<em class="parameter"><code>srcStageMask</code></em> (see <a class="xref" href="ch06s05.html#synchronization-pipeline-stage-flags" title="6.5.2. Pipeline Stage Flags">Section 6.5.2, “Pipeline Stage Flags”</a>) is the
    bitwise OR of the pipeline stages used to signal the event object
    handles in <em class="parameter"><code>pEvents</code></em>.
</li><li class="listitem">
<em class="parameter"><code>dstStageMask</code></em> is the pipeline stages at which the wait will occur.
</li><li class="listitem">
<em class="parameter"><code>pMemoryBarriers</code></em> is a pointer to an array of
    <em class="parameter"><code>memoryBarrierCount</code></em> <code class="code">VkMemoryBarrier</code> structures.
</li><li class="listitem">
<em class="parameter"><code>pBufferMemoryBarriers</code></em> is a pointer to an array of
    <em class="parameter"><code>bufferMemoryBarrierCount</code></em> <code class="code">VkBufferMemoryBarrier</code> structures.
</li><li class="listitem">
<em class="parameter"><code>pImageMemoryBarriers</code></em> is a pointer to an array of
    <em class="parameter"><code>imageMemoryBarrierCount</code></em> <code class="code">VkImageMemoryBarrier</code> structures.
    See <a class="xref" href="ch06s05.html#synchronization-memory-barriers" title="6.5.3. Memory Barriers">Section 6.5.3, “Memory Barriers”</a> for more details about memory
    barriers.
</li></ul></div><p><span class="strong"><strong><code class="code">vkCmdWaitEvents</code></strong></span> waits for events set by either <span class="strong"><strong><code class="code">vkSetEvent</code></strong></span> or
<span class="strong"><strong><code class="code">vkCmdSetEvent</code></strong></span> to become signaled.
Logically, it has three phases:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
Wait at the pipeline stages specified by <em class="parameter"><code>dstStageMask</code></em> (see
    <a class="xref" href="ch06s05.html#synchronization-pipeline-stage-flags" title="6.5.2. Pipeline Stage Flags">Section 6.5.2, “Pipeline Stage Flags”</a>) until the <em class="parameter"><code>eventCount</code></em>
    event objects specified by <em class="parameter"><code>pEvents</code></em> become signaled.
    Implementations <span class="normative">may</span> wait for each event object to become signaled in
    sequence (starting with the first event object in <em class="parameter"><code>pEvents</code></em>, and
    ending with the last), or wait for all of the event objects to become
    signaled at the same time.
</li><li class="listitem">
Execute the memory barriers specified by <em class="parameter"><code>pMemoryBarriers</code></em>,
    <em class="parameter"><code>pBufferMemoryBarriers</code></em> and <em class="parameter"><code>pImageMemoryBarriers</code></em> (see
    <a class="xref" href="ch06s05.html#synchronization-memory-barriers" title="6.5.3. Memory Barriers">Section 6.5.3, “Memory Barriers”</a>).
</li><li class="listitem">
Resume execution of pipeline stages specified by <em class="parameter"><code>dstStageMask</code></em>
</li></ol></div><p>Implementations <span class="normative">may</span> not execute commands in a pipelined manner, so
<span class="strong"><strong><code class="code">vkCmdWaitEvents</code></strong></span> <span class="normative">may</span> not observe the results of a subsequent
<span class="strong"><strong><code class="code">vkCmdSetEvent</code></strong></span> or <span class="strong"><strong><code class="code">vkCmdResetEvent</code></strong></span> command, even if the stages in
<em class="parameter"><code>dstStageMask</code></em> occur after the stages in <em class="parameter"><code>srcStageMask</code></em>.</p><p>Commands that update the state of events in different pipeline stages <span class="normative">may</span>
execute out of order, unless the ordering is enforced by execution
dependencies.</p><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note: Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Applications <span class="normative">should</span> be careful to avoid race conditions when using events.
For example, an event <span class="normative">should</span> only be reset if no <span class="strong"><strong><code class="code">vkCmdWaitEvents</code></strong></span>
command is executing that waits upon that event.</p></td></tr></table></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Valid Usage</strong></p></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>srcStageMask</code></em> <span class="normative">must</span> be the bitwise OR of the <em class="parameter"><code>stageMask</code></em>
    parameter used in previous calls to <span class="strong"><strong><code class="code">vkCmdSetEvent</code></strong></span> with any of the
    members of <em class="parameter"><code>pEvents</code></em> and <code class="code">VK_PIPELINE_STAGE_HOST_BIT</code> if any of
    the members of <em class="parameter"><code>pEvents</code></em> was set using <span class="strong"><strong><code class="code">vkSetEvent</code></strong></span>
</li><li class="listitem">
If the <a class="link" href="ch31s01.html#features-features-geometryShader">geometry shaders</a> feature is
    not enabled, <em class="parameter"><code>srcStageMask</code></em> <span class="normative">must</span> not contain
    <code class="code">VK_PIPELINE_STAGE_GEOMETRY_SHADER_BIT</code>
</li><li class="listitem">
If the <a class="link" href="ch31s01.html#features-features-geometryShader">geometry shaders</a> feature is
    not enabled, <em class="parameter"><code>dstStageMask</code></em> <span class="normative">must</span> not contain
    <code class="code">VK_PIPELINE_STAGE_GEOMETRY_SHADER_BIT</code>
</li><li class="listitem">
If the <a class="link" href="ch31s01.html#features-features-tessellationShader">tessellation shaders</a>
    feature is not enabled, <em class="parameter"><code>srcStageMask</code></em> <span class="normative">must</span> not contain
    <code class="code">VK_PIPELINE_STAGE_TESSELLATION_CONTROL_SHADER_BIT</code> or
    <code class="code">VK_PIPELINE_STAGE_TESSELLATION_EVALUATION_SHADER_BIT</code>
</li><li class="listitem">
If the <a class="link" href="ch31s01.html#features-features-tessellationShader">tessellation shaders</a>
    feature is not enabled, <em class="parameter"><code>dstStageMask</code></em> <span class="normative">must</span> not contain
    <code class="code">VK_PIPELINE_STAGE_TESSELLATION_CONTROL_SHADER_BIT</code> or
    <code class="code">VK_PIPELINE_STAGE_TESSELLATION_EVALUATION_SHADER_BIT</code>
</li><li class="listitem">
If <em class="parameter"><code>pEvents</code></em> includes one or more events that will be signaled by
    <span class="strong"><strong><code class="code">vkSetEvent</code></strong></span> after <em class="parameter"><code>commandBuffer</code></em> has been submitted to a
    queue, then <span class="strong"><strong><code class="code">vkCmdWaitEvents</code></strong></span> <span class="normative">must</span> not be called inside a render
    pass instance
</li></ul></div></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Valid Usage (Implicit)</strong></p></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>commandBuffer</code></em> <span class="normative">must</span> be a valid <code class="code">VkCommandBuffer</code> handle
</li><li class="listitem">
<em class="parameter"><code>pEvents</code></em> <span class="normative">must</span> be a pointer to an array of <em class="parameter"><code>eventCount</code></em> valid <code class="code">VkEvent</code> handles
</li><li class="listitem">
<em class="parameter"><code>srcStageMask</code></em> <span class="normative">must</span> be a valid combination of <code class="code"><a class="link" href="ch06s05.html#VkPipelineStageFlagBits">VkPipelineStageFlagBits</a></code> values
</li><li class="listitem">
<em class="parameter"><code>srcStageMask</code></em> <span class="normative">must</span> not be <code class="literal">0</code>
</li><li class="listitem">
<em class="parameter"><code>dstStageMask</code></em> <span class="normative">must</span> be a valid combination of <code class="code"><a class="link" href="ch06s05.html#VkPipelineStageFlagBits">VkPipelineStageFlagBits</a></code> values
</li><li class="listitem">
<em class="parameter"><code>dstStageMask</code></em> <span class="normative">must</span> not be <code class="literal">0</code>
</li><li class="listitem">
If <em class="parameter"><code>memoryBarrierCount</code></em> is not <code class="literal">0</code>, <em class="parameter"><code>pMemoryBarriers</code></em> <span class="normative">must</span> be a pointer to an array of <em class="parameter"><code>memoryBarrierCount</code></em> valid <code class="code">VkMemoryBarrier</code> structures
</li><li class="listitem">
If <em class="parameter"><code>bufferMemoryBarrierCount</code></em> is not <code class="literal">0</code>, <em class="parameter"><code>pBufferMemoryBarriers</code></em> <span class="normative">must</span> be a pointer to an array of <em class="parameter"><code>bufferMemoryBarrierCount</code></em> valid <code class="code">VkBufferMemoryBarrier</code> structures
</li><li class="listitem">
If <em class="parameter"><code>imageMemoryBarrierCount</code></em> is not <code class="literal">0</code>, <em class="parameter"><code>pImageMemoryBarriers</code></em> <span class="normative">must</span> be a pointer to an array of <em class="parameter"><code>imageMemoryBarrierCount</code></em> valid <code class="code">VkImageMemoryBarrier</code> structures
</li><li class="listitem">
<em class="parameter"><code>commandBuffer</code></em> <span class="normative">must</span> be in the recording state
</li><li class="listitem">
The <code class="code">VkCommandPool</code> that <em class="parameter"><code>commandBuffer</code></em> was allocated from <span class="normative">must</span> support graphics, or compute operations
</li><li class="listitem">
<em class="parameter"><code>eventCount</code></em> <span class="normative">must</span> be greater than <code class="literal">0</code>
</li><li class="listitem">
Both of <em class="parameter"><code>commandBuffer</code></em>, and the elements of <em class="parameter"><code>pEvents</code></em> <span class="normative">must</span> have been created, allocated, or retrieved from the same <code class="code">VkDevice</code>
</li></ul></div></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Host Synchronization</strong></p></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Host access to <em class="parameter"><code>commandBuffer</code></em> <span class="normative">must</span> be externally synchronized
</li></ul></div></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Command Properties</strong></p></div></div></div><div class="informaltable"><table class="informaltable" cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; " width="100%"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top">Command Buffer Levels</th><th style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top">Render Pass Scope</th><th style="border-bottom: 1px solid #527bbd; " align="left" valign="top">Supported Queue Types</th></tr></thead><tbody><tr><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>Primary
Secondary</p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>Both</p></td><td style="" align="left" valign="top"><p>GRAPHICS
COMPUTE</p></td></tr></tbody></table></div></div><p>An act of setting or resetting an event in one queue <span class="normative">may</span> not affect or be
visible to other queues.
For cross-queue synchronization, semaphores <span class="normative">can</span> be used.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch06s02.html"><img src="images/icons/prev.png" alt="Prev" /></a> </td><td width="20%" align="center"><a accesskey="u" href="ch06.html"><img src="images/icons/up.png" alt="Up" /></a></td><td width="40%" align="right"> <a accesskey="n" href="ch06s04.html"><img src="images/icons/next.png" alt="Next" /></a></td></tr><tr><td width="40%" align="left" valign="top"> </td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="images/icons/home.png" alt="Home" /></a></td><td width="40%" align="right" valign="top"> </td></tr></table></div></body></html>